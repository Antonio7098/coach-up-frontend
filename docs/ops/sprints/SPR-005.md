# Sprint SPR-005 — Coaching UX & Focus

Deliver coaching UX: corrections UI chips/panel, UserFocus model v1 with constraints, dashboard MVP, settings, TTS playback, and STT fallback.

## Meta
- Sprint ID: SPR-005
- Status: planned
- Start date: <YYYY-MM-DD>
- End date: <YYYY-MM-DD>
- Links: [Overview](./overview.md) · [PRD](../../planning/prd.md) · [Technical Overview](../../planning/technical-overview.md) · [Monitoring](../../ops/monitoring.md) · [Benchmarking](../../ops/benchmarking.md) · [Features CSV](../features.csv)

## Objectives (Tick when achieved)
- [ ] Corrections UI chips & panel
- [ ] UserFocus model v1 with up to 3 active focuses and ordering
- [ ] Dashboard MVP (history & trends)
- [ ] Settings for mic/language/privacy
- [ ] TTS playback and STT fallback integrated

## Planned Tasks
- [ ] Corrections UI — <owner> (<estimate>)
   - [ ] Chips display; panel details; actions
- [ ] UserFocus Model — <owner> (<estimate>)
   - [ ] Create model + constraints (max 3 active, ordered)
   - [ ] APIs for selection/reordering
- [ ] Dashboard MVP — <owner> (<estimate>)
   - [ ] Recent sessions, top errors/progress
- [ ] Settings — <owner> (<estimate>)
   - [ ] Mic, language, privacy toggles
- [ ] Voice I/O — <owner> (<estimate>)
   - [ ] TTS playback; STT fallback wiring

## Scope
In scope
- Coaching UX, basic personalization via focuses, voice I/O polish

Out of scope
- Deep analytics or advanced gamification

## Features in this Sprint
List feature IDs from Features CSV (pipe-separate multiple)
- [ ] FEAT-006 — Corrections UI Chips & Panel (frontend)
- [ ] FEAT-012 — UserFocus Model v1 (backend)
- [ ] FEAT-013 — Dashboard (History & Trends) MVP (frontend)
- [ ] FEAT-015 — Settings (Mic, Language, Privacy) (frontend)
- [ ] FEAT-016 — Voice TTS Playback (frontend)
- [ ] FEAT-017 — STT Fallback (Cloud) (ai)

## Acceptance Criteria
- [ ] Corrections are visible, actionable, and dismissible; no UI jank
- [ ] UserFocus constraints enforced; selection and reorder persist
- [ ] Dashboard shows last 7 days and top focuses/errors
- [ ] TTS works on supported browsers; STT fallback triggers on failure

## Risks & Mitigations
- Risk: UI complexity · Mitigation: phased rollout, keep minimal initial
- Risk: Browser STT/TTS variability · Mitigation: feature detection, provider fallback

## Dependencies
- Depends on features/sprints: SPR-002 (assessments), SPR-003 (schema)
- External: STT/TTS provider for fallback

## Technical Details
### Database Models
- Collections/Tables impacted: UserFocus, Assessment (reads), UserSession
- New/changed fields: UserFocus.order/active; assessment indexes for dashboard
- Constraints/validation: max 3 active; order unique per user
- Indexes (read/write paths): UserFocus by userId, active, order
- Migrations: add UserFocus — Backfill plan: NA
- Data retention: NA

### Algorithmic Details
- Approach: simple selection/prioritization; dashboard aggregates from assessments
- Rubric Version: v1 (reads)
- Latency targets: UI interactivity smooth (<100ms updates where possible)

### Prompts & Rubrics
- NA (reads rubric outputs)

## QA & Testing
- [ ] Unit tests for UserFocus constraints
- [ ] E2E for corrections UI + dashboard
- [ ] Browser tests for TTS/STT fallback
- [ ] Accessibility checks for UI components

## Observability & SLOs
Targets (see Technical Overview §10)
- Realtime chat p95 TTFT < 1.2s; full-turn < 2.5s
- Assessment p95 completion < 8s

Checkpoints
- [ ] Dashboards include UI error logs and usage
- [ ] Alerts on STT/TTS failures above threshold
- [ ] Structured logs include user actions for corrections

## Issues & Deviations
Use this section to log issues encountered during the sprint, how they were resolved, and any deviations from the plan.

- Date: <YYYY-MM-DD> — Issue: <short summary> — Impact: <scope/users/services>
  - Detection: <alert/log/user report>
  - Fix: <what changed> — PR: <link> — Owner: <name>
  - Follow-up: <test/monitoring/doc action>
- Deviation from plan: <what changed and why>

## Post-sprint
- [ ] KPIs reviewed; compare to targets
- [ ] Retrospective completed; action items filed

## Change Log
- 2025-08-19 Created sprint page
