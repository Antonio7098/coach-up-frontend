# Sprint SPR-006 — Coaching UX & Focus

Deliver coaching UX: corrections UI chips/panel, Tracked Skill model v1 with constraints, dashboard MVP, settings, TTS playback, and STT fallback.

## Meta
- Sprint ID: SPR-006
- Status: planned
- Start date: <DD/MM/YYYY>
- End date:
- Links: [Overview](./overview.md) · [PRD](../../planning/prd.md) · [Technical Overview](../../planning/technical-overview.md) · [Monitoring](../../ops/monitoring.md) · [Benchmarking](../../ops/benchmarking.md) · [Features CSV](../features.csv)

## Objectives (Tick when achieved)
- [ ] Corrections UI chips & panel
- [ ] Tracked Skill model v1 with up to 3 active skills and ordering
- [ ] Dashboard MVP (history & trends)
- [ ] Settings for mic/language/privacy
- [ ] TTS playback and STT fallback integrated

## Planned Tasks
- [ ] Corrections UI — <owner> (<estimate>)
   - [ ] Chips display; panel details; actions
- [ ] Tracked Skill Model — <owner> (<estimate>)
   - [ ] Create model + constraints (max 3 active, ordered)
   - [ ] APIs for selection/reordering
- [ ] Dashboard MVP — <owner> (<estimate>)
   - [ ] Recent sessions, top errors/progress
- [ ] Settings — <owner> (<estimate>)
   - [ ] Mic, language, privacy toggles
- [ ] Voice I/O — <owner> (<estimate>)
   - [ ] TTS playback; STT fallback wiring

## Scope
In scope
- Coaching UX, basic personalization via tracked skills, voice I/O polish

Out of scope
- Deep analytics or advanced gamification
- Focus Insights (V2 — non-MVP)

## Features in this Sprint
List feature IDs from Features CSV (pipe-separate multiple)
- [ ] FEAT-006 — Corrections UI Chips & Panel (frontend)
- [ ] FEAT-012 — Tracked Skill Model v1 (backend)
- [ ] FEAT-013 — Dashboard (History & Trends) MVP (frontend)
- [ ] FEAT-015 — Settings (Mic, Language, Privacy) (frontend)
- [ ] FEAT-016 — Voice TTS Playback (frontend)
- [ ] FEAT-017 — STT Fallback (Cloud) (ai)

## Acceptance Criteria
- [ ] Corrections are visible, actionable, and dismissible; no UI jank
- [ ] Tracked Skill constraints enforced; selection and reorder persist
- [ ] Dashboard shows last 7 days and top tracked skills
- [ ] TTS works on supported browsers; STT fallback triggers on failure

## Risks & Mitigations
- Risk: UI complexity · Mitigation: phased rollout, keep minimal initial
- Risk: Browser STT/TTS variability · Mitigation: feature detection, provider fallback

## Dependencies
- Depends on features/sprints: SPR-002 (assessments), SPR-003 (schema)
- External: STT/TTS provider for fallback

## Technical Details
### Database Models
- Collections/Tables impacted: Tracked Skill, Assessment (reads), UserSession
- New/changed fields: Tracked Skill.order/active; assessment indexes for dashboard
- Constraints/validation: max 3 active; order unique per user
- Indexes (read/write paths): Tracked Skill by userId, active, order
- Migrations: add Tracked Skill — Backfill plan: NA
- Data retention: NA

### Algorithmic Details
- Approach: simple selection/prioritization; dashboard aggregates from assessments
- Rubric Version: v1 (reads)
- Latency targets: UI interactivity smooth (<100ms updates where possible)

### Prompts & Rubrics
- NA (reads rubric outputs)

## QA & Testing
- [ ] Unit tests for Tracked Skill constraints
- [ ] E2E for corrections UI + dashboard
- [ ] Browser tests for TTS/STT fallback
- [ ] Accessibility checks for UI components

## Observability & SLOs
Targets (see Technical Overview §10)
- Realtime chat p95 TTFT < 1.2s; full-turn < 2.5s
- Assessment p95 completion < 8s

Checkpoints
- [ ] Dashboards include UI error logs and usage
- [ ] Alerts on STT/TTS failures above threshold
- [ ] Structured logs include user actions for corrections

## Issues & Deviations
Use this section to log issues encountered during the sprint, how they were resolved, and any deviations from the plan.

- Date: <YYYY-MM-DD> — Issue: <short summary> — Impact: <scope/users/services>
  - Detection: <alert/log/user report>
  - Fix: <what changed> — PR: <link> — Owner: <name>
  - Follow-up: <test/monitoring/doc action>
- Deviation from plan: <what changed and why>

## Operational Hygiene
- [ ] CI checks green (API Docs workflow, tests/linting)
- [ ] Branch protection respected (PR + review)
- [ ] Pre-commit hooks executed (lint/format/type checks)
- [ ] .env.example updated if new env vars added
- [ ] Request ID propagated end-to-end for changed paths
- [ ] Logs include: requestId, route, userId (if available), provider, modelId, tokens, cost, latency
- [ ] Rate limiting and idempotency considered for new/changed endpoints

## Documentation
- [ ] API reference updated for endpoints touched (Core & AI)
- [ ] OpenAPI spec updated and linted
- [ ] Examples added/verified (curl + TypeScript)
- [ ] Cross-links updated (PRD/Technical Overview)

## Post-sprint
- [ ] KPIs reviewed; compare to targets
- [ ] Retrospective completed; action items filed

## Change Log
- 22/08/2025 Renumbered from SPR-005 to SPR-006 and updated scope to Coaching UX & Focus
